!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).littlefoot={})}(this,function(e){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var s=t(n(function(n){var i,a,u,c,s,l,f,d,p,v,h,m,y,g,b,w,_,x,S,E,O,j,L;!function(){var e="object"==typeof r?r:"object"==typeof self?self:"object"==typeof this?this:{};function t(n,r){return n!==e&&("function"==typeof Object.create?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(e,t){return n[e]=r?r(e,t):t}}!function(e){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};i=function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)},a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e},u=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++){if(t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o]))n[r[o]]=e[r[o]]}return n},c=function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)if(a=e[u])i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i},s=function(n,r){return function(e,t){r(e,t,n)}},l=function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)},f=function(e,a,n,u){function c(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(t,n){function r(e){try{i(u.next(e))}catch(e){n(e)}}function o(e){try{i(u["throw"](e))}catch(e){n(e)}}function i(e){e.done?t(e.value):c(e.value).then(r,o)}i((u=u.apply(e,a||[])).next())})},d=function(e,n){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,i,a,t;return t={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function u(t){return function(e){return c([t,e])}}function c(t){if(o)throw new TypeError("Generator is already executing.");while(r)try{if(o=1,i&&(a=t[0]&2?i["return"]:t[0]?i["throw"]||((a=i["return"])&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;if(i=0,a)t=[t[0]&2,a.value];switch(t[0]){case 0:case 1:a=t;break;case 4:r.label++;return{value:t[1],done:false};case 5:r.label++;i=t[1];t=[0];continue;case 7:t=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(t[0]===6||t[0]===2)){r=0;continue}if(t[0]===3&&(!a||t[1]>a[0]&&t[1]<a[3])){r.label=t[1];break}if(t[0]===6&&r.label<a[1]){r.label=a[1];a=t;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(t);break}if(a[2])r.ops.pop();r.trys.pop();continue}t=n.call(e,r)}catch(e){t=[6,e];i=0}finally{o=a=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}},p=function(e,t){for(var n in e)if(n!=="default"&&!t.hasOwnProperty(n))L(t,e,n)},L=Object.create?function(e,t,n,r){if(r===undefined)r=n;Object.defineProperty(e,r,{enumerable:true,get:function(){return t[n]}})}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]},v=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],a;try{while((t===void 0||t-- >0)&&!(o=r.next()).done)i.push(o.value)}catch(e){a={error:e}}finally{try{if(o&&!o.done&&(n=r["return"]))n.call(r)}finally{if(a)throw a.error}}return i},m=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e},y=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r},g=function(e){return this instanceof g?(this.v=e,this):new g(e)},b=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),i,a=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){if(o[r])i[r]=function(n){return new Promise(function(e,t){a.push([r,n,e,t])>1||u(r,n)})}}function u(e,t){try{c(o[e](t))}catch(e){f(a[0][3],e)}}function c(e){e.value instanceof g?Promise.resolve(e.value.v).then(s,l):f(a[0][2],e)}function s(e){u("next",e)}function l(e){u("throw",e)}function f(e,t){if(e(t),a.shift(),a.length)u(a[0][0],a[0][1])}},w=function(r){var e,o;return e={},t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,n){e[t]=r[t]?function(e){return(o=!o)?{value:g(r[t](e)),done:t==="return"}:n?n(e):e}:n}},_=function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof v==="function"?v(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=o[r]&&function(n){return new Promise(function(e,t){n=o[r](n),i(e,t,n.done,n.value)})}}function i(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}},x=function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};var o=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t};S=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))L(t,e,n);o(t,e);return t},E=function(e){return e&&e.__esModule?e:{default:e}},O=function(e,t){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t.get(e)},j=function(e,t,n){if(!t.has(e)){throw new TypeError("attempted to set private field on non-instance")}t.set(e,n);return n},e("__extends",i),e("__assign",a),e("__rest",u),e("__decorate",c),e("__param",s),e("__metadata",l),e("__awaiter",f),e("__generator",d),e("__exportStar",p),e("__createBinding",L),e("__values",v),e("__read",h),e("__spread",m),e("__spreadArrays",y),e("__await",g),e("__asyncGenerator",b),e("__asyncDelegator",w),e("__asyncValues",_),e("__makeTemplateObject",x),e("__importStar",S),e("__importDefault",E),e("__classPrivateFieldGet",O),e("__classPrivateFieldSet",j)}(t(e,t(n.exports)))}()})),o=n(function(e,t){t.__esModule=!0,t.getStyle=function(e,t){var n,r=((null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)||window).getComputedStyle(e);return r.getPropertyValue(t)||r[t]}}),h=t(o),b="littlefoot-footnote__content",c="littlefoot-footnote__tooltip",w="littlefoot-footnote__wrapper",m="is-positioned-",y="bottom",g="top";function _(e){var t=parseFloat(h.getStyle(e,"marginLeft")),n=e.offsetWidth-t,r=e.offsetHeight,o=e.getBoundingClientRect(),i=o.left+n/2,a=o.top+r/2;return{top:a,bottom:window.innerHeight-a,leftRelative:i/window.innerWidth}}function x(e,t){var n=2*parseInt(h.getStyle(e,"marginTop"),10)+e.offsetHeight;return t.bottom<n&&t.bottom<t.top}function i(e){var t;null!==(t=e.parentNode)&&void 0!==t&&t.removeChild(e)}var l={activateDelay:100,activateOnHover:!1,allowDuplicates:!0,allowMultiple:!1,anchorParentSelector:"sup",anchorPattern:/(fn|footnote|note)[:\-_\d]/gi,dismissDelay:100,dismissOnUnhover:!1,footnoteSelector:"li",hoverDelay:250,numberResetSelector:"",scope:"",contentTemplate:'<aside class="littlefoot-footnote" id="fncontent:<% id %>"><div class="'+w+'"><div class="'+b+'"><% content %></div></div><div class="'+c+'"></div></aside>',buttonTemplate:'<button class="littlefoot-footnote__button littlefoot-footnote__button__ellipsis" id="<% reference %>" title="See Footnote <% number %>" aria-expanded="false" aria-label="Footnote <% number %>"><svg viewbox="0 0 31 6" preserveAspectRatio="xMidYMid"><circle r="3" cx="3" cy="3" fill="white"></circle><circle r="3" cx="15" cy="3" fill="white"></circle><circle r="3" cx="27" cy="3" fill="white"></circle></svg></button>'};function f(e,t){e.isReady()&&(e.dismiss(),setTimeout(function(){e.remove()},t))}var a=t(n(function(e,t){t.__esModule=!0;var p=96,v=25.4,h=72,m=6;function y(e){return e?o.getStyle(e,"fontSize")||y(e.parentElement):o.getStyle(window.document.documentElement,"fontSize")}t.pixels=function e(t,n){var r,o,i,a,u,c,s=null!=(o=null===(r=null==n?void 0:n.ownerDocument)||void 0===r?void 0:r.defaultView)?o:window,l=s.document.documentElement||s.document.body,f=(a=t||"0",u=parseFloat(a),c=a.match(/[\d-.]+(\w+)$/),[u,(null!=(i=null==c?void 0:c[1])?i:"").toLowerCase()]),d=f[0];switch(f[1]){case"rem":return d*e(y(window.document.documentElement));case"em":return d*e(y(n),null==n?void 0:n.parentElement);case"in":return d*p;case"q":return d*p/v/4;case"mm":return d*p/v;case"cm":return d*p*10/v;case"pt":return d*p/h;case"pc":return d*p/m;case"vh":return(d*s.innerHeight||l.clientWidth)/100;case"vw":return(d*s.innerWidth||l.clientHeight)/100;case"vmin":return d*Math.min(s.innerWidth||l.clientWidth,s.innerHeight||l.clientHeight)/100;case"vmax":return d*Math.max(s.innerWidth||l.clientWidth,s.innerHeight||l.clientHeight)/100;default:return d}}})),S="is-active",E="is-changing",O="is-scrollable";function j(e){var t=e.id,f=e.button,d=e.content,n=e.host,p=e.popover,u=e.wrapper,r=!1,v=0;return{id:t,activate:function(e){f.classList.add(E),f.setAttribute("aria-expanded","true"),f.classList.add(S),f.insertAdjacentElement("afterend",p),p.style.maxWidth=document.body.clientWidth+"px";var t=h.getStyle(d,"maxHeight");v=Math.round(a.pixels(t,d)),"function"==typeof e&&e(p,f)},dismiss:function(){f.classList.add(E),f.setAttribute("aria-expanded","false"),f.classList.remove(S)},isActive:function(){return f.classList.contains(S)},isReady:function(){return!f.classList.contains(E)},isHovered:function(){return r},ready:function(){p.classList.add(S),f.classList.remove(E)},remove:function(){i(p),f.classList.remove(E)},reposition:function(){if(p.parentElement){var e=_(f),t=Math.min(v,(s=x(u=p,c=e),l=parseInt(h.getStyle(u,"marginTop"),10),c[s?g:y]-l-15));d.style.maxHeight=t+"px",o=x(n=p,r=e),(i=n.dataset.footnotePosition)!==(a=o?g:y)&&(n.dataset.footnotePosition=a,n.classList.remove(""+m+i),n.classList.add(""+m+a),n.style.transformOrigin=100*r.leftRelative+"% "+(o?"100%":"0")),p.offsetHeight<d.scrollHeight?(p.classList.add(O),d.setAttribute("tabindex","0")):(p.classList.remove(O),d.removeAttribute("tabindex"))}var n,r,o,i,a,u,c,s,l},resize:function(){if(p.parentElement){var e=_(f),t=d.offsetWidth,n=parseInt(h.getStyle(f,"marginLeft"),10),r=-e.leftRelative*t+n+f.offsetWidth/2;p.style.left=r+"px",u.style.maxWidth=t+"px",o=p,i=e.leftRelative,(a=o.querySelector("."+c))&&(a.style.left=100*i+"%")}var o,i,a},startHovering:function(){r=!0},stopHovering:function(){r=!1},destroy:function(){i(n)}}}var L=t(n(function(e,t){t.__esModule=!0,t.throttle=function(r,o){void 0===o&&(o=0);var i,a=0;return Object.assign(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Math.max(0,a+o-Date.now());n?(clearTimeout(i),i=setTimeout(function(){a=Date.now(),r.apply(void 0,e)},n)):(a=Date.now(),r.apply(void 0,e))},{cancel:function(){a=0,clearTimeout(i)}})}})),u=n(function(e,t){e.exports=function(){function e(){if(!(this instanceof e)){return new e}this.size=0;this.uid=0;this.selectors=[];this.selectorObjects={};this.indexes=Object.create(this.indexes);this.activeIndexes=[]}var t=window.document.documentElement,n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.msMatchesSelector;e.prototype.matchesSelector=function(e,t){return n.call(e,t)},e.prototype.querySelectorAll=function(e,t){return t.querySelectorAll(e)};var r=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;(e.prototype.indexes=[]).push({name:"ID",selector:function e(t){var n;if(n=t.match(r)){return n[0].slice(1)}},element:function e(t){if(t.id){return[t.id]}}});var o=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;e.prototype.indexes.push({name:"CLASS",selector:function e(t){var n;if(n=t.match(o)){return n[0].slice(1)}},element:function e(t){var n=t.className;if(n){if(typeof n==="string"){return n.split(/\s/)}else if(typeof n==="object"&&"baseVal"in n){return n.baseVal.split(/\s/)}}}});var i=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g,p;if(e.prototype.indexes.push({name:"TAG",selector:function e(t){var n;if(n=t.match(i)){return n[0].toUpperCase()}},element:function e(t){return[t.nodeName.toUpperCase()]}}),e.prototype.indexes["default"]={name:"UNIVERSAL",selector:function(){return true},element:function(){return[true]}},typeof window.Map==="function"){p=window.Map}else{p=function(){function e(){this.map={}}e.prototype.get=function(e){return this.map[e+" "]};e.prototype.set=function(e,t){this.map[e+" "]=t};return e}()}var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;function h(e,t){e=e.slice(0).concat(e["default"]);var n=e.length,r,o,i,a,u=t,c,s,l=[];do{f.exec("");if(i=f.exec(u)){u=i[3];if(i[2]||!u){for(r=0;r<n;r++){s=e[r];if(c=s.selector(i[1])){o=l.length;a=false;while(o--){if(l[o].index===s&&l[o].key===c){a=true;break}}if(!a){l.push({index:s,key:c})}break}}}}}while(i);return l}function v(e,t){var n,r,o;for(n=0,r=e.length;n<r;n++){o=e[n];if(t.isPrototypeOf(o)){return o}}}function m(e,t){return e.id-t.id}return e.prototype.logDefaultIndexUsed=function(){},e.prototype.add=function(e,t){var n,r,o,i,a,u,c,s,l=this.activeIndexes,f=this.selectors,d=this.selectorObjects;if("string"==typeof e){for(d[(n={id:this.uid++,selector:e,data:t}).id]=n,c=h(this.indexes,e),r=0;r<c.length;r++)i=(s=c[r]).key,(a=v(l,o=s.index))||((a=Object.create(o)).map=new p,l.push(a)),o===this.indexes.default&&this.logDefaultIndexUsed(n),(u=a.map.get(i))||(u=[],a.map.set(i,u)),u.push(n);this.size++,f.push(e)}},e.prototype.remove=function(e,t){if("string"==typeof e){var n,r,o,i,a,u,c,s,l=this.activeIndexes,f=this.selectors=[],d=this.selectorObjects,p={},v=1===arguments.length;for(n=h(this.indexes,e),o=0;o<n.length;o++)for(r=n[o],i=l.length;i--;)if(u=l[i],r.index.isPrototypeOf(u)){if(c=u.map.get(r.key))for(a=c.length;a--;)(s=c[a]).selector!==e||!v&&s.data!==t||(c.splice(a,1),p[s.id]=!0);break}for(o in p)delete d[o],this.size--;for(o in d)f.push(d[o].selector)}},e.prototype.queryAll=function(e){if(!this.selectors.length)return[];var t,n,r,o,i,a,u,c,s={},l=[],f=this.querySelectorAll(this.selectors.join(", "),e);for(t=0,r=f.length;t<r;t++)for(i=f[t],n=0,o=(a=this.matches(i)).length;n<o;n++)s[(c=a[n]).id]?u=s[c.id]:(u={id:c.id,selector:c.selector,data:c.data,elements:[]},s[c.id]=u,l.push(u)),u.elements.push(i);return l.sort(m)},e.prototype.matches=function(e){if(!e)return[];var t,n,r,o,i,a,u,c,s,l,f,d=this.activeIndexes,p={},v=[];for(t=0,o=d.length;t<o;t++)if(c=(u=d[t]).element(e))for(n=0,i=c.length;n<i;n++)if(s=u.map.get(c[n]))for(r=0,a=s.length;r<a;r++)!p[f=(l=s[r]).id]&&this.matchesSelector(e,l.selector)&&(p[f]=!0,v.push(l));return v.sort(m)},e}()}),P=t(n(function(e,t){!function(e,u){u=u&&u.hasOwnProperty("default")?u["default"]:u;var s={},l={},f=new WeakMap,d=new WeakMap,p=new WeakMap,n=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function v(e,t,n){var r=e[t];e[t]=function(){n.apply(e,arguments);return r.apply(e,arguments)};return e}function h(e,t,n){var r=[];var o=t;do{if(o.nodeType!==1)break;var i=e.matches(o);if(i.length){var a={node:o,observers:i};if(n){r.unshift(a)}else{r.push(a)}}}while(o=o.parentElement);return r}function m(){f.set(this,true)}function y(){f.set(this,true);d.set(this,true)}function g(){return p.get(this)||null}function b(e,t){if(!n)return;Object.defineProperty(e,"currentTarget",{configurable:true,enumerable:true,get:t||n.get})}function c(e){var t=e.eventPhase===1?l:s;var n=t[e.type];if(!n)return;var r=h(n,e.target,e.eventPhase===1);if(!r.length)return;v(e,"stopPropagation",m);v(e,"stopImmediatePropagation",y);b(e,g);for(var o=0,i=r.length;o<i;o++){if(f.get(e))break;var a=r[o];p.set(e,a.node);for(var u=0,c=a.observers.length;u<c;u++){if(d.get(e))break;a.observers[u].data.call(a.node,e)}}p["delete"](e);b(e)}function t(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o=r.capture?true:false;var i=o?l:s;var a=i[e];if(!a){a=new u;i[e]=a;document.addEventListener(e,c,o)}a.add(t,n)}function r(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o=r.capture?true:false;var i=o?l:s;var a=i[e];if(!a)return;a.remove(t,n);if(a.size)return;delete i[e];document.removeEventListener(e,c,o)}function o(e,t,n){return e.dispatchEvent(new CustomEvent(t,{bubbles:true,cancelable:true,detail:n}))}e.fire=o,e.off=r,e.on=t,Object.defineProperty(e,"__esModule",{value:true})}(t,u)})),M=16,T="[data-footnote-button]",A="[data-footnote-id]",k="[data-footnote-popover]",d="is-fully-scrolled";function D(e){return e.target}function H(e){return null==e?void 0:e.dataset.footnoteId}function I(r,o){return function(e){e.preventDefault();var t=H(D(e).closest(A)),n=t&&r(t);n&&o(n)}}function R(e,t){var r;e.addEventListener("wheel",L.throttle((r=t,function(e){var t=e.currentTarget,n=-e.deltaY;0<n&&r.classList.remove(d),t&&n<=0&&n<t.clientHeight+t.scrollTop-t.scrollHeight&&r.classList.add(d)}),M))}function p(e){var r,o,i,t,n=e.dismissAll,a=e.lookup,u=e.hover,c=e.repositionAll,s=e.resizeAll,l=e.toggle,f=e.unhover,d=(r=a,o=l,function(e){var t=H(D(e).closest(T)),n=t&&r(t);n?o(n):D(e).closest(k)||i()}),p=(t=i=n,function(e){27===e.keyCode&&t()}),v=L.throttle(c,M),h=L.throttle(s,M),m=I(a,u),y=I(a,f);return document.addEventListener("touchend",d),document.addEventListener("click",d),document.addEventListener("keyup",p),document.addEventListener("gestureend",v),window.addEventListener("scroll",v),window.addEventListener("resize",h),P.on("mouseover",A,m),P.on("mouseout",A,y),function(){document.removeEventListener("touchend",d),document.removeEventListener("click",d),document.removeEventListener("keyup",p),document.removeEventListener("gestureend",v),window.removeEventListener("scroll",v),window.removeEventListener("resize",h),P.off("mouseover",A,m),P.off("mouseout",A,y)}}var v="footnote-print-only",F="littlefoot-footnote__host",W=function(e){return e.classList.add(v)};function z(e,t){return Array.from(e.querySelectorAll(t))}function C(e,t){return e.querySelector("."+t)||e.firstElementChild||e}function q(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function U(e){return void 0!==e}function V(e){var t,n,r=(t=e,n=":not(."+v+")",Array.from(t.children).filter(function(e){return 8!==e.nodeType&&(!n||e.matches(n))})),o=r.filter(function(e){return"HR"===e.tagName});r.length===o.length&&(o.concat(e).forEach(W),V(e.parentElement))}function N(e){var t=e.parentElement;i(e);var n=null==t?void 0:t.innerHTML.replace("[]","").replace("&nbsp;"," ").trim();t&&!n&&N(t)}function G(e,t){var n=q(e.body.outerHTML);z(n,'[href$="#'+e.referenceId+'"]').forEach(N);var r=n.innerHTML.trim();return{original:e,data:{id:""+(t+1),number:t+1,reference:"lf-"+e.referenceId,content:r.startsWith("<")?r:"<p>"+r+"</p>"}}}var B=function(o){var i=0,a=null;return function(e){var t=e.original,n=e.data,r=t.reference.closest(o);return i=a===r?i+1:1,a=r,{original:t,data:s.__assign(s.__assign({},n),{number:i})}}};function $(e){var t=/<%=?\s*(\w+?)\s*%>/g;return function(r){return e.replace(t,function(e,t){var n;return String(null!==(n=r[t])&&void 0!==n?n:"")})}}function Y(e){var s,l,i,a,u,c,f,t,n,r=e.allowDuplicates,o=e.anchorParentSelector,d=e.anchorPattern,p=e.buttonTemplate,v=e.contentTemplate,h=e.footnoteSelector,m=e.numberResetSelector,y=e.scope,g=(t=document,n=d,z(t,y+' a[href*="#"]').filter(function(e){return(e.href+e.rel).match(n)}).map((i=document,a=r,u=o,c=h,f=[],function(e){var t="#"+e.href.split("#")[1].replace(/[:.+~*[\]]/g,"\\$&"),n=z(i,t).find(function(e){return a||!f.includes(e)}),r=null==n?void 0:n.closest(c);if(r){f.push(r);var o=e.closest(u)||e;return{reference:o,referenceId:o.id||e.id,body:r}}})).filter(U).map(G).map(m?B(m):function(e){return e}).map((s=$(p),l=$(v),function(e){var t=e.original,n=e.data,r=n.id,o=q('<span class="'+F+'">'+s(n)+"</span>"),i=o.firstElementChild;i.dataset.footnoteButton="",i.dataset.footnoteId=r,i.dataset.footnoteNumber=""+n.number;var a=q(l(n));a.dataset.footnotePopover="",a.dataset.footnoteId=r;var u=C(a,w),c=C(a,b);return R(c,a),{original:t,data:n,id:r,button:i,host:o,popover:a,content:c,wrapper:u}})));return g.forEach(function(e){var t,n,r=e.original,o=e.host;W(r.reference),W(r.body),V(r.body.parentElement),t=r.reference,n=o,t.insertAdjacentElement("beforebegin",n)}),g.map(j)}function J(e){e.forEach(function(e){return e.destroy()}),z(document,"."+v).forEach(function(e){return e.classList.remove(v)})}function K(e){void 0===e&&(e={});var t,n,r,o,i,a=s.__assign(s.__assign({},l),e),u=(r=(t={setup:Y,addListeners:p,cleanup:J}).setup(n=a),o={activate:c,dismiss:f,lookup:function(t){return r.find(function(e){return e.id===t})},dismissAll:function(){r.forEach(function(e){return f(e,n.dismissDelay)})},repositionAll:function(){r.forEach(function(e){return e.reposition()})},resizeAll:function(){r.forEach(function(e){return e.resize()})},toggle:function(e){e.isActive()?f(e,n.dismissDelay):c(e,n.activateDelay)},hover:function(e){e.startHovering(),n.activateOnHover&&!e.isActive()&&c(e,n.hoverDelay)},unhover:function(e){e.stopHovering(),n.dismissOnUnhover&&setTimeout(function(){r.filter(function(e){return!e.isHovered()}).forEach(function(e){return f(e,n.dismissDelay)})},n.hoverDelay)}},i=t.addListeners(o),s.__assign(s.__assign({},o),{unmount:function(){i(),t.cleanup(r)}}));function c(t,e){n.allowMultiple||r.filter(function(e){return e.id!==t.id}).forEach(function(e){return f(e,n.dismissDelay)}),t.isReady()&&(t.activate(n.activateCallback),t.reposition(),t.resize(),setTimeout(function(){t.ready()},e))}return{activate:function(e,t){void 0===t&&(t=a.activateDelay);var n=u.lookup(e);n&&u.activate(n,t)},dismiss:function(e,t){void 0===t&&(t=a.dismissDelay);var n=e&&u.lookup(e);n?u.dismiss(n,t):u.dismissAll()},unmount:u.unmount,getSetting:function(e){return a[e]},updateSetting:function(e,t){a[e]=t}}}e.default=K,e.littlefoot=K,Object.defineProperty(e,"__esModule",{value:!0})});
